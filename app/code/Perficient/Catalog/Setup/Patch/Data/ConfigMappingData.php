<?php
/**
 * Product Attribute Mapping
 * @category: Magento
 * @package: Perficient/CatalogPermissions
 * @copyright: Copyright Â© 2020 Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 * @license: Magento Enterprise Edition (MEE) license
 * @author: Sachin Badase<Sachin.Badase@Perficient.com>
 * @project: Wendover
 * @keywords: Module Perficient_Catalog
 */
declare(strict_types=1);

namespace Perficient\Catalog\Setup\Patch\Data;

use Magento\Framework\App\Config\ScopeConfigInterface;
use Magento\Framework\App\Config\Storage\WriterInterface;
use Magento\Framework\Setup\ModuleDataSetupInterface;
use Magento\Framework\Setup\Patch\DataPatchInterface;

/**
 * Class ConfigMappingData
 * @package Perficient\Catalog\Setup\Patch\Data
 */
class ConfigMappingData implements DataPatchInterface
{
    /**
     * @const string
     */
    const PERFICIENT_CRMCONNECTOR_PRODUCT_MAPPING = 'perficient_crmconnector/product/mapping';

    /**
     * ConfigData constructor.
     * @param WriterInterface $configWriter
     * @param ModuleDataSetupInterface $moduleDataSetup
     */
    public function __construct(
        protected WriterInterface          $configWriter,
        protected ModuleDataSetupInterface $moduleDataSetup
    )
    {
    }

    /**
     * @return array
     */
    public static function getDependencies()
    {
        return [];
    }

    /**
     * Run code inside patch script
     */
    public function apply()
    {
        $this->moduleDataSetup->getConnection()->startSetup();
        $this->disableCatalogPopularSearchTerm();
        $this->moduleDataSetup->getConnection()->endSetup();
    }

    /**
     * Enable catalog config
     */
    public function disableCatalogPopularSearchTerm()
    {
        $scopeId = false;
        $scope = ScopeConfigInterface::SCOPE_TYPE_DEFAULT;
        /**
         * PERFICIENT_CRMCONNECTOR_PRODUCT_MAPPING
         */
        $this->configWriter->save(
            self::PERFICIENT_CRMCONNECTOR_PRODUCT_MAPPING, '{"_1597756904569_569":{"regexp":"entity_id","value":"itemId","child":""},"_1597757007591_591":{"regexp":"sku","value":"sku","child":""},"_1597757022895_895":{"regexp":"name","value":"name","child":""},"_1597757027599_599":{"regexp":"type_id","value":"type_id","child":""},"_1597757036391_391":{"regexp":"status","value":"status","child":""},"_1597757052343_343":{"regexp":"visibility","value":"visibility","child":""},"_1597757061863_863":{"regexp":"art_configuration_type","value":"configurationType","child":""},"_1597757083751_751":{"regexp":"price_level","value":"priceLevel","child":""},"_1597757103854_854":{"regexp":"price_level_1","value":"framePriceLevel","child":"p1"},"_1597757112990_990":{"regexp":"price_level_2","value":"framePriceLevel","child":"p2"},"_1597757121934_934":{"regexp":"price_level_3","value":"framePriceLevel","child":"p3"},"_1597757183464_464":{"regexp":"frame_skus","value":"availableFrames","child":""},"_1597757199447_447":{"regexp":"top_mat_skus","value":"availableTopMats","child":""},"_1597757224824_824":{"regexp":"bottom_mat_skus","value":"availableBottomMats","child":""},"_1597757242751_751":{"regexp":"top_mat_width","value":"topMatWidth","child":""},"_1597757257439_439":{"regexp":"bottom_mat_width","value":"bottomMatWidth","child":""},"_1597757275359_359":{"regexp":"color","value":"color","child":""},"_1597757290215_215":{"regexp":"frame_depth","value":"frameDepth","child":""},"_1597757302991_991":{"regexp":"frame_max_size","value":"frameMaxSize","child":""},"_1597757318015_15":{"regexp":"specialty","value":"specialty","child":""},"_1597757342639_639":{"regexp":"liner_width","value":"liner_width","child":""},"_1597757347750_750":{"regexp":"liner_sku","value":"linerSku","child":""},"_1597757403407_407":{"regexp":"mat_padding","value":"matPadding","child":"top,right,bottom,left"},"_1597757619414_414":{"regexp":"cropped","value":"croppedImage","child":""},"_1597757640038_38":{"regexp":"corner1_img","value":"frameImageCorner1","child":""},"_1597757649086_86":{"regexp":"corner2_img","value":"frameImageCorner2","child":""},"_1597757663495_495":{"regexp":"length1_img","value":"frameImageLength1","child":""},"_1597757678655_655":{"regexp":"length2_img","value":"frameImageLength2","child":""},"_1597757709816_816":{"regexp":"new_number","value":"numberOrder","child":""},"_1597757724230_230":{"regexp":"item_height","value":"height","child":""},"_1597757742190_190":{"regexp":"item_width","value":"width","child":""},"_1597757751046_46":{"regexp":"category_ids","value":"categoryIds","child":""},"_1597757765334_334":{"regexp":"related_products","value":"relatedProducts","child":""},"_1597757779014_14":{"regexp":"uuid","value":"UUID","child":""},"_1597757796391_391":{"regexp":"attributeSetName","value":"attributeSetName","child":""},"_1597757805222_222":{"regexp":"is_art_configurable","value":"isArtConfigurable","child":""},"_1597757845062_62":{"regexp":"productCount","value":"productCount","child":""},"_1597757865262_262":{"regexp":"mat_pattern","value":"matPattern","child":""},"_1597757896368_368":{"regexp":"image","value":"image","child":""},"_1597757906239_239":{"regexp":"small_image","value":"smallImage","child":""},"_1597757919438_438":{"regexp":"thumbnail","value":"imageThumbnail","child":""},"_1597757932998_998":{"regexp":"frame_default_sku","value":"frameDefaultSku","child":""},"_1597757945870_870":{"regexp":"top_mat_default_sku","value":"topMatDefaultSku","child":""},"_1597757963286_286":{"regexp":"bottom_mat_default_sku","value":"bottomMatDefaultSku","child":""},"_1597757987295_295":{"regexp":"price","value":"defaultPrice","child":""},"_1597758001439_439":{"regexp":"package_uuid","value":"packageUUID","child":""},"_1597758010022_22":{"regexp":"frame_width","value":"frameWidth","child":""},"_1597758056446_446":{"regexp":"color_frame","value":"frameColor","child":""},"_1597758071302_302":{"regexp":"visible","value":"visible","child":""},"_1597758079694_694":{"regexp":"count","value":"count","child":""},"_1597758093574_574":{"regexp":"data","value":"data","child":""},"_1597758107807_807":{"regexp":"metadata","value":"metadata","child":""},"_1597758120583_583":{"regexp":"medium","value":"medium","child":""},"_1597758136934_934":{"regexp":"filter_size","value":"size","child":""},"_1597758154503_503":{"regexp":"tradeshow_added","value":"tradeshowAdded","child":""},"_1597758165071_71":{"regexp":"year_added","value":"yearAdded","child":""},"_1597758178942_942":{"regexp":"updated_at","value":"updated","child":""},"_1597758196806_806":{"regexp":"created_at","value":"created","child":""},"_1611154357016_16":{"regexp":"single_corner","value":"single_corner","child":""},"_1611154357016_13362":{"regexp":"artist_name","value":"artist_name","child":""},"_1611154357016_13361":{"regexp":"art_mount_type","value":"art_mount_type","child":""},"_1611154357016_13360":{"regexp":"bottom_mat_size_bottom","value":"bottom_mat_size_bottom","child":""},"_1611154357016_13359":{"regexp":"bottom_mat_size_left","value":"bottom_mat_size_left","child":""},"_1611154357016_13358":{"regexp":"bottom_mat_size_right","value":"bottom_mat_size_right","child":""},"_1611154357016_13357":{"regexp":"bottom_mat_size_top","value":"bottom_mat_size_top","child":""},"_1611154357016_13356":{"regexp":"category_list","value":"category_list","child":""},"_1611154357016_13355":{"regexp":"specialty_note","value":"specialty_note","child":""},"_1611154357016_13354":{"regexp":"syspro_number","value":"syspro_number","child":""},"_1611154357016_13353":{"regexp":"test","value":"test","child":""},"_1611154357016_13352":{"regexp":"top_mat_size_bottom","value":"top_mat_size_bottom","child":""},"_1611154357016_13351":{"regexp":"top_mat_size_left","value":"top_mat_size_left","child":""},"_1611154357016_13350":{"regexp":"top_mat_size_right","value":"top_mat_size_right","child":""},"_1611154357016_13345":{"regexp":"top_mat_size_top","value":"top_mat_size_top","child":""},"_1611154357016_13344":{"regexp":"treatment","value":"treatment","child":""},"_1611154357016_13343":{"regexp":"wag_number","value":"wag_number","child":""},"_1611154357016_13342":{"regexp":"color_family","value":"color_family","child":""},"_1611154357016_13341":{"regexp":"color_mat","value":"color_mat","child":""},"_1611154357016_13340":{"regexp":"color_swatch","value":"color_swatch","child":""},"_1611154357016_13339":{"regexp":"configuration_level","value":"configuration_level","child":""},"_1611154357016_13338":{"regexp":"cost","value":"cost","child":""},"_1611154357016_13337":{"regexp":"default_configurations","value":"default_configurations","child":""},"_1611154357016_13336":{"regexp":"default_item_price","value":"default_item_price","child":""},"_1611154357016_13335":{"regexp":"fabric_cost_per_lin_ft","value":"fabric_cost_per_lin_ft","child":""},"_1611154357016_13334":{"regexp":"filter_thickness","value":"filter_thickness","child":""},"_1611154357016_13333":{"regexp":"filter_type","value":"filter_type","child":""},"_1611154357016_13332":{"regexp":"frames","value":"frames","child":""},"_1611154357016_13331":{"regexp":"frame_family","value":"frame_family","child":""},"_1611154357016_13330":{"regexp":"frame_material","value":"frame_material","child":""},"_1611154357016_13329":{"regexp":"frame_rabbet_depth","value":"frame_rabbet_depth","child":""},"_1611154357016_13328":{"regexp":"frame_type","value":"frame_type","child":""},"_1611154357016_13327":{"regexp":"frame_width","value":"frame_width","child":""},"_1611154357016_13326":{"regexp":"glass_height","value":"glass_height","child":""},"_1611154357016_13325":{"regexp":"glass_width","value":"glass_width","child":""},"_1611154357016_13324":{"regexp":"image_height","value":"image_height","child":""},"_1611154357016_13323":{"regexp":"image_width","value":"image_width","child":""},"_1611154357016_13322":{"regexp":"is_inner_bevel","value":"is_inner_bevel","child":""},"_1611154357016_13321":{"regexp":"is_quick_ship","value":"is_quick_ship","child":""},"_1611154357016_13320":{"regexp":"keyword_list","value":"keyword_list","child":""},"_1611154357016_13319":{"regexp":"landed_cost_per_foot","value":"landed_cost_per_foot","child":""},"_1611154357016_13318":{"regexp":"licensed_collection","value":"licensed_collection","child":""},"_1611154357016_13316":{"regexp":"lifestyle_image","value":"lifestyle_image","child":""},"_1611154357016_13315":{"regexp":"manufacturer","value":"manufacturer","child":""},"_1611154357016_13314":{"regexp":"mats","value":"mats","child":""},"_1611154357016_13313":{"regexp":"mat_type","value":"mat_type","child":""},"_1611154357016_13312":{"regexp":"max_image_height","value":"max_image_height","child":""},"_1611154357016_13311":{"regexp":"max_image_width","value":"max_image_width","child":""},"_1611154357016_1339":{"regexp":"max_outer_size","value":"max_outer_size","child":""},"_1611154357016_1338":{"regexp":"media_category","value":"media_category","child":""},"_1611154357016_1337":{"regexp":"mirror_bevel","value":"mirror_bevel","child":""},"_1611154357016_1336":{"regexp":"moulding_waste_pct","value":"moulding_waste_pct","child":""},"_1611154357016_1335":{"regexp":"orientation","value":"orientation","child":""},"_1611154357016_1334":{"regexp":"other_skus_in_series","value":"other_skus_in_series","child":""},"_1611154357016_1333":{"regexp":"related_items","value":"related_items","child":""},"_1611154357016_1332":{"regexp":"simplified_medium","value":"simplified_medium","child":""},"_1611154357016_1331":{"regexp":"simplified_size","value":"simplified_size","child":""},"_1611226132344_344":{"regexp":"xxx","value":"zzzz","child":""},"_1611154357016_13363":{"regexp":"allow_message","value":"allow_message","child":""},"_1611154357016_13364":{"regexp":"allow_open_amount","value":"allow_open_amount","child":""},"_1611154357016_13365":{"regexp":"country_of_manufacture","value":"country_of_manufacture","child":""},"_1611154357016_13366":{"regexp":"cropper_image","value":"cropper_image","child":""},"_1611154357016_13367":{"regexp":"cross_domain_store","value":"cross_domain_store","child":""},"_1611154357016_13368":{"regexp":"cross_domain_url","value":"cross_domain_url","child":""},"_1611154357016_13369":{"regexp":"custom_design","value":"custom_design","child":""},"_1611154357016_13370":{"regexp":"custom_design_from","value":"custom_design_from","child":""},"_1611154357016_13371":{"regexp":"custom_design_to","value":"custom_design_to","child":""},"_1611154357016_13372":{"regexp":"custom_layout","value":"custom_layout","child":""},"_1611154357016_13373":{"regexp":"custom_layout_update","value":"custom_layout_update","child":""},"_1611154357016_13374":{"regexp":"custom_layout_update_file","value":"custom_layout_update_file","child":""},"_1611154357016_13375":{"regexp":"default_option","value":"default_option","child":""},"_1611154357016_13376":{"regexp":"description","value":"description","child":""},"_1611154357016_13377":{"regexp":"double_corner","value":"double_corner","child":""},"_1611154357016_13378":{"regexp":"email_template","value":"email_template","child":""},"_1611154357016_13379":{"regexp":"enable_googlecheckout","value":"enable_googlecheckout","child":""},"_1611154357016_13380":{"regexp":"gallery","value":"gallery","child":""},"_1611154357016_13381":{"regexp":"giftcard_amounts","value":"giftcard_amounts","child":""},"_1611154357016_13382":{"regexp":"giftcard_type","value":"giftcard_type","child":""},"_1611154357016_13383":{"regexp":"gift_message_available","value":"gift_message_available","child":""},"_1611154357016_13384":{"regexp":"gift_wrapping_available","value":"gift_wrapping_available","child":""},"_1611154357016_13385":{"regexp":"gift_wrapping_price","value":"gift_wrapping_price","child":""},"_1611154357016_13386":{"regexp":"has_options","value":"has_options","child":""},"_1611154357016_13387":{"regexp":"image_label","value":"image_label","child":""},"_1611154357016_13388":{"regexp":"in_html_sitemap","value":"in_html_sitemap","child":""},"_1611154357016_13389":{"regexp":"in_xml_sitemap","value":"in_xml_sitemap","child":""},"_1611154357016_13390":{"regexp":"is_redeemable","value":"is_redeemable","child":""},"_1611154357016_13391":{"regexp":"is_returnable","value":"is_returnable","child":""},"_1611154357016_13392":{"regexp":"lifetime","value":"lifetime","child":""},"_1611154357016_13393":{"regexp":"links_exist","value":"links_exist","child":""},"_1611154357016_13394":{"regexp":"links_purchased_separately","value":"links_purchased_separately","child":""},"_1611154357016_13395":{"regexp":"links_title","value":"links_title","child":""},"_1611154357016_13396":{"regexp":"media_gallery","value":"media_gallery","child":""},"_1611154357016_13397":{"regexp":"meta_description","value":"meta_description","child":""},"_1611154357016_13398":{"regexp":"meta_keyword","value":"meta_keyword","child":""},"_1611154357016_13399":{"regexp":"meta_robots","value":"meta_robots","child":""},"_1611154357016_1339100":{"regexp":"meta_title","value":"meta_title","child":""},"_1611154357016_1339101":{"regexp":"minimal_price","value":"minimal_price","child":""},"_1611154357016_1339102":{"regexp":"msrp","value":"msrp","child":""},"_1611154357016_1339103":{"regexp":"msrp_display_actual_price_type","value":"msrp_display_actual_price_type","child":""},"_1611154357016_1339104":{"regexp":"news_from_date","value":"news_from_date","child":""},"_1611154357016_1339105":{"regexp":"news_to_date","value":"news_to_date","child":""},"_1611154357016_1339106":{"regexp":"old_id","value":"old_id","child":""},"_1611154357016_1339107":{"regexp":"open_amount_max","value":"open_amount_max","child":""},"_1611154357016_1339108":{"regexp":"open_amount_min","value":"open_amount_min","child":""},"_1611154357016_1339109":{"regexp":"options_container","value":"options_container","child":""},"_1611154357016_1339110":{"regexp":"page_layout","value":"page_layout","child":""},"_1611154357016_1339112":{"regexp":"price_type","value":"price_type","child":""},"_1611154357016_1339113":{"regexp":"price_view","value":"price_view","child":""},"_1611154357016_1339114":{"regexp":"product_customizer","value":"product_customizer","child":""},"_1611154357016_1339115":{"regexp":"product_seo_name","value":"product_seo_name","child":""},"_1611154357016_1339116":{"regexp":"quantity_and_stock_status","value":"quantity_and_stock_status","child":""},"_1611154357016_1339117":{"regexp":"related_tgtr_position_behavior","value":"related_tgtr_position_behavior","child":""},"_1611154357016_1339118":{"regexp":"related_tgtr_position_limit","value":"related_tgtr_position_limit","child":""},"_1611154357016_1339119":{"regexp":"renderer_corner","value":"renderer_corner","child":""},"_1611154357016_1339120":{"regexp":"renderer_length","value":"renderer_length","child":""},"_1611154357016_1339121":{"regexp":"required_options","value":"required_options","child":""},"_1611154357016_1339122":{"regexp":"samples_title","value":"samples_title","child":""},"_1611154357016_1339123":{"regexp":"shipment_type","value":"shipment_type","child":""},"_1611154357016_1339124":{"regexp":"short_description","value":"short_description","child":""},"_1611154357016_1339125":{"regexp":"sku_type","value":"sku_type","child":""},"_1611154357016_1339126":{"regexp":"small_image_label","value":"small_image_label","child":""},"_1611154357016_1339127":{"regexp":"special_from_date","value":"special_from_date","child":""},"_1611154357016_1339128":{"regexp":"special_price","value":"special_price","child":""},"_1611154357016_1339129":{"regexp":"special_to_date","value":"special_to_date","child":""},"_1611154357016_1339130":{"regexp":"spec_details","value":"spec_details","child":""},"_1611154357016_1339131":{"regexp":"swatch_image","value":"swatch_image","child":""},"_1611154357016_1339132":{"regexp":"tax_class_id","value":"tax_class_id","child":""},"_1611154357016_1339133":{"regexp":"thumbnail_label","value":"thumbnail_label","child":""},"_1611154357016_1339134":{"regexp":"tier_price","value":"tier_price","child":""},"_1611154357016_1339136":{"regexp":"upsell_tgtr_position_behavior","value":"upsell_tgtr_position_behavior","child":""},"_1611154357016_1339137":{"regexp":"upsell_tgtr_position_limit","value":"upsell_tgtr_position_limit","child":""},"_1611154357016_1339138":{"regexp":"url_key","value":"url_key","child":""},"_1611154357016_1339139":{"regexp":"url_path","value":"url_path","child":""},"_1611154357016_1339140":{"regexp":"use_config_allow_message","value":"use_config_allow_message","child":""},"_1611154357016_1339141":{"regexp":"use_config_email_template","value":"use_config_email_template","child":""},"_1611154357016_1339142":{"regexp":"use_config_is_redeemable","value":"use_config_is_redeemable","child":""},"_1611154357016_1339143":{"regexp":"use_config_lifetime","value":"use_config_lifetime","child":""},"_1611154357016_1339144":{"regexp":"use_in_crosslinking","value":"use_in_crosslinking","child":""},"_1611154357016_1339145":{"regexp":"weight","value":"weight","child":""},"_1611154357016_1339146":{"regexp":"weight_type","value":"weight_type","child":""}}',
            $scope,
            $scopeId);
    }

    /**
     * @return array
     */
    public function getAliases()
    {
        return [];
    }
}
